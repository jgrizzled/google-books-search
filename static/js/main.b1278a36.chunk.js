(this["webpackJsonpgoogle-books-search"]=this["webpackJsonpgoogle-books-search"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),l=n.n(o),i=n(3),u=n(1),s=n(20),c=n(24),m=n.n(c),f=n(25),p=n.n(f);function h(){var e=Object(i.a)(["\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}var g=Object(u.createGlobalStyle)(h(),s.Normalize,p.a,m.a),b=n(4),d=n.n(b),k=n(5),y=n(6),v=n(7),x=n(9),E=n(8),T=n(10),j=n(14),F=n(16);function O(){var e=Object(i.a)(["\n  position: absolute;\n  top: 0.5rem;\n  right: 0.5rem;\n  font-size: 1.5rem;\n"]);return O=function(){return e},e}var S=u.default.span(O()),B=function(e){return a.a.createElement(S,{onClick:e.toggleTheme},e.isDarkTheme?a.a.createElement(j.a,{icon:F.b}):a.a.createElement(j.a,{icon:F.a}))};function I(){var e=Object(i.a)(["\n  margin: 0 auto;\n  font-size: ",";\n"]);return I=function(){return e},e}function P(){var e=Object(i.a)(["\n  background-color: ",";\n  color: ",";\n  text-align: center;\n  padding: 0.5rem 0;\n  position: relative;\n"]);return P=function(){return e},e}var w=u.default.header(P(),(function(e){return e.theme.color.primary}),(function(e){return e.theme.color.onPrimary})),C=u.default.h1(I(),(function(e){return e.theme.fontSize.extraLarge})),q=function(e){return a.a.createElement(w,null,a.a.createElement(C,null,"Google Books Search"),a.a.createElement(B,{toggleTheme:e.toggleTheme,isDarkTheme:e.isDarkTheme}))};function D(){var e=Object(i.a)(["\n  background-color: ",";\n  color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 0.25rem;\n  margin-right: 1rem;\n"]);return D=function(){return e},e}var R=u.default.input(D(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.onBackground}),(function(e){return e.theme.color.onSurface})),z=function(e){return a.a.createElement(R,{onChange:function(t){return e.onChange(t.target.value)}})};function L(){var e=Object(i.a)(["\n  min-width: fit-content;\n  margin: 0.5rem 1rem;\n"]);return L=function(){return e},e}function A(){var e=Object(i.a)(["\n  width: 7rem;\n  margin-left: 1rem;\n  background-color: ",";\n  color: ",";\n"]);return A=function(){return e},e}var N=u.default.select(A(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.onBackground})),V=u.default.span(L()),_=function(e){return a.a.createElement(V,null,e.title,a.a.createElement(N,{id:e.id,name:e.id,value:e.selected,onChange:function(t){return e.onChange(t.target.value)}},e.options.map((function(e,t){return a.a.createElement("option",{key:t,value:e.value},e.text)}))))};function G(){var e=Object(i.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  padding: ",";\n  margin: ",";\n"]);return G=function(){return e},e}function Q(){var e=Object(i.a)(["\n  border-radius: 4px;\n  padding: 0.3rem;\n"]);return Q=function(){return e},e}function J(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  background-color: ",";\n  color: ",";\n  padding-top: 0.5rem;\n"]);return J=function(){return e},e}var M=[{value:"all",text:"All"},{value:"free-ebooks",text:"Free"},{value:"paid-ebooks",text:"Paid"}],U=[{value:"all",text:"All"},{value:"books",text:"Books"},{value:"magazines",text:"Magazines"}],W=u.default.form(J(),(function(e){return e.theme.color.surface}),(function(e){return e.theme.color.onSurface})),Y=u.default.input.attrs((function(){return{type:"submit"}}))(Q()),Z=u.default.div(G(),(function(e){return e.theme.space.small}),(function(e){return e.theme.space.small})),$=function(e){return a.a.createElement(W,{onSubmit:function(t){return e.handleSubmit(t)}},a.a.createElement(Z,null,a.a.createElement(z,{id:"search-box",value:e.queryParams.query,onChange:e.setQuery}),a.a.createElement(Y,{value:"Search"})),a.a.createElement(Z,null,a.a.createElement(_,{title:"Book Type",id:"book-type",options:M,selected:e.queryParams.bookType,onChange:e.setBookType}),a.a.createElement(_,{title:"Print Type",id:"print-type",options:U,selected:e.queryParams.printType,onChange:e.setPrintType})))};function H(){var e=Object(i.a)(["\n  font-size: ",";\n  padding: 0.5rem;\n  line-height: 1rem;\n"]);return H=function(){return e},e}function K(){var e=Object(i.a)(["\n  display: flex;\n"]);return K=function(){return e},e}function X(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 2rem 0.5rem;\n  padding: 1rem;\n  box-shadow: 0 0.5rem 1rem -0.125rem rgba(10, 10, 10, 0.1);\n  background: ",";\n  color: ",";\n  img {\n    margin-right: 1rem;\n  }\n  p {\n    margin-top: 0;\n    margin-bottom: 0.5rem;\n  }\n  a {\n    font-weight: 700;\n  }\n"]);return X=function(){return e},e}var ee=u.default.li(X(),(function(e){return e.theme.color.surface}),(function(e){return e.theme.color.onSurface})),te=u.default.div(K()),ne=u.default.p(H(),(function(e){return e.theme.fontSize.small})),re=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).toggleExpand=function(){n.setState({expanded:!n.state.expanded})},n.state={expanded:!1},n}return Object(T.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return a.a.createElement(ee,{onClick:this.toggleExpand},a.a.createElement(te,null,this.props.book.imageLink&&a.a.createElement("a",{href:this.props.book.link,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{src:this.props.book.imageLink,alt:"thumbnail"})),a.a.createElement("span",null,a.a.createElement("p",null,a.a.createElement("a",{href:this.props.book.link,target:"_blank",rel:"noopener noreferrer"},this.props.book.title)),a.a.createElement("p",null,"Authors:\xa0",this.props.book.authors.join(", ")),a.a.createElement("p",null,"Year:\xa0",this.props.book.yearPublished),a.a.createElement("p",null,"Price:"," ",Number(this.props.book.price)>0&&" $"+this.props.book.price),a.a.createElement("p",null,this.props.book.saleability))),this.state.expanded?a.a.createElement("div",null,a.a.createElement(ne,null,this.props.book.description)):this.props.book.description&&"...")}}]),t}(a.a.Component);function ae(){var e=Object(i.a)(["\n  font-size: ",";\n"]);return ae=function(){return e},e}function oe(){var e=Object(i.a)(["\n  text-align: center;\n  margin: 1rem 0;\n"]);return oe=function(){return e},e}function le(){var e=Object(i.a)(["\n  background-color: ",";\n  color: ",";\n  margin-bottom: 3rem;\n  h2 {\n    text-align: center;\n  }\n  ul {\n    margin: "," auto;\n    max-width: 500px;\n    padding: 0 1rem;\n    list-style: none;\n  }\n"]);return le=function(){return e},e}var ie=u.default.section(le(),(function(e){return e.theme.color.background}),(function(e){return e.theme.color.onBackground}),(function(e){return e.theme.space.medium})),ue=u.default.p(oe()),se=u.default.a(ae(),(function(e){return e.theme.fontSize.large})),ce=function(e){var t=(e.page-1)*e.maxResults+1,n=t+e.maxResults-1;return a.a.createElement(ie,{id:"books"},e.books.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Books"),a.a.createElement(ue,null,"Showing ",t," - ",n," of ",e.totalBooks)),a.a.createElement("ul",null,e.books.map((function(e,t){return a.a.createElement(re,{book:e,key:t})}))),e.maxResults<e.totalBooks&&a.a.createElement(ue,null,t>=e.page-1*e.maxResults&&a.a.createElement(se,{href:"#books",onClick:function(){return e.setPage(e.page-1)}},"Prev"),"\xa0|\xa0",n<=e.totalBooks-e.maxResults&&a.a.createElement(se,{href:"#books",onClick:function(){return e.setPage(e.page+1)}},"Next")))},me=n(26),fe=function(e,t,n){var r=["key=AIzaSyBN_S6p7O0j88GdgPuw9_d-Izqcs926GyA","maxResults="+n,"startIndex="+Math.max(0,(t-1)*n)];if("string"===typeof e.q){var a=e.q.replace(/[^0-9a-zA-Z ]/g,"");if(!(a.replace(/\s/g,"").length>0))throw new Error("Empty query");r.push("q="+a)}return"string"===typeof e.bookType&&"all"!==e.bookType&&r.push("filter="+e.bookType),"string"===typeof e.printType&&"all"!==e.printType&&r.push("printType="+e.printType),"https://www.googleapis.com/books/v1/volumes?"+r.join("&")},pe=function(e){var t=null,n="Untitled",r=[],a=null,o=null,l=null,i=null,u=null;return e.volumeInfo&&("string"===typeof e.volumeInfo.canonicalVolumeLink&&(t=e.volumeInfo.canonicalVolumeLink),"string"===typeof e.volumeInfo.title&&(n=e.volumeInfo.title),"string"===typeof e.volumeInfo.subtitle&&(n+=": ".concat(e.volumeInfo.subtitle)),Array.isArray(e.volumeInfo.authors)&&r.push.apply(r,Object(me.a)(e.volumeInfo.authors)),e.volumeInfo.imageLinks&&("string"===typeof e.volumeInfo.imageLinks.thumbnail?l=e.volumeInfo.imageLinks.thumbnail:"string"===typeof e.volumeInfo.imageLinks.smallThumbnail&&(l=e.volumeInfo.imageLinks.smallThumbnail)),"string"===typeof e.volumeInfo.publishedDate&&(i=e.volumeInfo.publishedDate.slice(0,4)),"string"===typeof e.volumeInfo.description&&(u=e.volumeInfo.description)),e.saleInfo&&(e.saleInfo.listPrice&&(isNaN(Number(e.saleInfo.listPrice.amount))||(a=e.saleInfo.listPrice.amount)),Number(a)<=0?o="Free":"string"===typeof e.saleInfo.saleability&&("FREE"===e.saleInfo.saleability?o="Free":"FOR_SALE"===e.saleInfo.saleability&&(o="For Sale"))),{link:t,title:n,authors:r,price:a,saleability:o,imageLink:l,yearPublished:i,description:u}},he=function(e,t,n){var r,a,o,l,i;return d.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=fe(e,t,n),u.next=3,d.a.awrap(fetch(r));case 3:if((a=u.sent).ok){u.next=6;break}throw new Error(a);case 6:return u.next=8,d.a.awrap(a.json());case 8:return o=u.sent,l=null,"number"===typeof o.totalItems&&(l=o.totalItems),i=[],Array.isArray(o.items)&&(i=o.items.map((function(e){return pe(e)}))),u.abrupt("return",{totalBooks:l,books:i});case 14:case"end":return u.stop()}}))};function ge(){var e=Object(i.a)(["\n  text-align: center;\n  color: ",";\n"]);return ge=function(){return e},e}function be(){var e=Object(i.a)(["\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n  background-color: ",";\n  font-family: ",";\n  color: ",";\n  a {\n    color: ",";\n    text-decoration: none;\n  }\n  a:hover {\n    text-decoration: underline;\n  }\n"]);return be=function(){return e},e}var de=u.default.div(be(),(function(e){return e.theme.color.background}),(function(e){return e.theme.font.main}),(function(e){return e.theme.color.onBackground}),(function(e){return e.theme.color.link})),ke=u.default.p(ge(),(function(e){return e.theme.color.error})),ye=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleSubmit=function(e){var t,r,a;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),o.prev=1,o.next=4,d.a.awrap(he(n.state.form,1,n.props.maxResults));case 4:t=o.sent,r=t.totalBooks,0===(a=t.books).length?n.setState({books:[],page:1,totalBooks:0,error:"No books found"}):n.setState({totalBooks:r,books:a,page:1,queryParams:Object(k.a)({},n.state.form),error:null}),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(1),n.setState({books:[],page:1,totalBooks:0,error:"Failed to fetch books"}),console.log(o.t0);case 14:case"end":return o.stop()}}),null,null,[[1,10]])},n.setPage=function(e){var t,r;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e*n.props.maxResults>n.state.totalBooks||e<0)){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,d.a.awrap(he(n.state.queryParams,e,n.props.maxResults));case 5:t=a.sent,r=t.books,n.setState({books:r,page:e,error:null}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0),n.setState({error:"Failed to fetch books"});case 14:case"end":return a.stop()}}),null,null,[[2,10]])},n.setBookType=function(e){var t=Object(k.a)({},n.state.form,{bookType:e});n.setState({form:t})},n.setPrintType=function(e){var t=Object(k.a)({},n.state.form,{printType:e});n.setState({form:t})},n.setQuery=function(e){var t=Object(k.a)({},n.state.form,{q:e});n.setState({form:t})},n.toggleTheme=function(){n.setState({isDarkTheme:!n.state.isDarkTheme})},n.state={isDarkTheme:e.isDarkTheme,queryParams:{q:"",bookType:"all",printType:"all"},form:{q:"",bookType:"all",printType:"all"},books:[],totalBooks:0,page:1,error:null},n}return Object(T.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return a.a.createElement(u.ThemeProvider,{theme:this.props.themes[this.state.isDarkTheme?"dark":"light"]},a.a.createElement(de,null,a.a.createElement(q,{toggleTheme:this.toggleTheme,isDarkTheme:this.state.isDarkTheme}),a.a.createElement($,{queryParams:this.state.form,handleSubmit:this.handleSubmit,setBookType:this.setBookType,setPrintType:this.setPrintType,setQuery:this.setQuery}),this.state.error&&a.a.createElement(ke,null,this.state.error),a.a.createElement(ce,{books:this.state.books,totalBooks:this.state.totalBooks,maxResults:this.props.maxResults,page:this.state.page,setPage:this.setPage})))}}]),t}(a.a.Component);ye.defaultProps={maxResults:10,isDarkTheme:!1};var ve=ye,xe={fontSize:{small:"0.85rem",normal:"1rem",large:"1.25rem",extraLarge:"1.5rem"},font:{main:"'Roboto', sans-serif;"},fontWeight:{normal:"400",bold:"700"},space:{small:"0.25rem",medium:"0.5rem",large:"1rem",extraLarge:"2rem"},breakpoint:{medium:"600px",large:"1000px"}},Ee={light:Object(k.a)({},xe,{color:{primary:"#6200EE",primaryVariant:"#3700B3",secondary:"#03DAC6",secondaryVariant:"#018786",background:"#FFFFFF",surface:"#f2f2f2",error:"#B00020",onPrimary:"#FFFFFF",onSecondary:"#000000",onBackground:"#000000",onSurface:"#000000",onError:"#FFFFFF",link:"#1890ff"}}),dark:Object(k.a)({},xe,{color:{primary:"#BB86FC",primaryVariant:"#3700B3",secondary:"#03DAC6",secondaryVariant:"#018786",background:"#121212",surface:"#333333",error:"#CF6679",onPrimary:"#000000",onSecondary:"#000000",onBackground:"#FFFFFF",onSurface:"#FFFFFF",onError:"#000000",link:"#99ceff"}})};l.a.render(a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(ve,{themes:Ee})),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.b1278a36.chunk.js.map